<!DOCTYPE html>
<html lang="zh-Hans">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width">
<title>git 备忘</title>
<link rel="stylesheet" href="https://raw.github.com/necolas/normalize.css/master/normalize.css" />
<link rel="stylesheet" href="../../theme/static/css/common.css" />
</head>
<body>
<header>
<h1>涂鸦</h1>
</header>
<nav>
<ul>
<li><a href="../../index.html" title="index">INDEX</a></li>
<li><a href="../../tag.html" title="tag">TAG</a></li>
<li><a href="../../link.html" title="link">LINK</a></li>
<li><a href="../../about.html" title="about">ABOUT</a></li>
</ul>
</nav>
<article id="post">
<h1>git</h1>
<p>记录碰到的git命令。</p>
<hr />
<h2>basic</h2>
<p>首先是几个别名，可以使用命令设置
<code>git config --global alias.short command</code>，
我觉得手动修改<code>~/.gitconfig</code>更方便些。</p>
<div class="codehilite"><pre><span class="k">[alias]</span>
    <span class="na">ad</span> <span class="o">=</span> <span class="s">add -A</span>
<span class="s">    st = status -bs</span>
<span class="s">    ci = commit</span>
<span class="s">    br = branch</span>
<span class="s">    co = checkout</span>
<span class="s">    df = diff HEAD --stat</span>
<span class="s">    logs = log --oneline --graph --decorate -10</span>
</pre></div>


<p>然后是几个基本命令，<code>[...]</code>表示文件名之类的。</p>
<div class="codehilite"><pre>git init
git add .
git ci -m <span class="s1">&#39;&#39;</span>
git push origin
git pull origin

git mv <span class="o">[</span>old_name<span class="o">]</span> <span class="o">[</span>new_name<span class="o">]</span>
git rm <span class="o">[</span>file_name<span class="o">]</span>

<span class="c">######</span>

<span class="c"># 列出远程服务器</span>
git remote

<span class="c"># 添加删除远程服务器</span>
git remote add <span class="o">[</span><span class="nb">alias</span><span class="o">]</span> <span class="o">[</span>url<span class="o">]</span>
git remote rm <span class="o">[</span><span class="nb">alias</span><span class="o">]</span>

<span class="c">######</span>

<span class="c"># 列出branch</span>
git br -a

<span class="c"># 新建branch</span>
git br <span class="o">[</span>branch_name<span class="o">]</span>

<span class="c"># 删除branch</span>
git br -d <span class="o">[</span>branch_name<span class="o">]</span>

<span class="c">######</span>

<span class="c"># 转到[name]分支，可以是branch，tag，hash</span>
git co <span class="o">[</span>name<span class="o">]</span>

<span class="c"># 在当前branch基础上新建一个名为[name]的branch，再转到[name]</span>
git co -b <span class="o">[</span>name<span class="o">]</span>

<span class="c">######</span>

<span class="c"># 列出tag</span>
git tag

<span class="c"># 添加一个tag</span>
git tag <span class="o">[</span>tag_name<span class="o">]</span>

<span class="c"># 为其他分支添加tag</span>
<span class="c"># [branch_name]可以是branch，sha1</span>
git tag <span class="o">[</span>tag_name<span class="o">]</span> <span class="o">[</span>branch_name<span class="o">]</span>

<span class="c"># 删除tag</span>
git tag -d <span class="o">[</span>tag_name<span class="o">]</span>
</pre></div>


<p>我自己常用的就这么几个了。 用到hash的时候，输入前4个字符就可以了。</p>
<hr />
<h2>intermediate</h2>
<p>下面都是使用时碰到的问题</p>
<div class="codehilite"><pre><span class="c"># 重置到之前的版本</span>
git reset --hard <span class="o">[</span><span class="nb">hash</span><span class="o">]</span>

<span class="c">######</span>

<span class="c"># 删除远程服务器上的分支</span>
git push origin --delete <span class="o">[</span>branch_name<span class="o">]</span>
<span class="c"># git push origin :[branch_name]</span>

<span class="c"># 在远程服务器上新建一个分支</span>
git push origin <span class="o">[</span>local_branch<span class="o">]</span>:<span class="o">[</span>remote_branch<span class="o">]</span>

<span class="c">######</span>

<span class="c"># 从某个branch复制文件，[branch_name]也可以是[hash]，HEAD</span>
git co <span class="o">[</span>branch_name<span class="o">]</span> <span class="o">[</span>file_name<span class="o">]</span>

<span class="c">######</span>

<span class="c"># 修改上次的commit</span>
<span class="c"># 可以用来追加文件，修改注释</span>
git ci --amend

git ci -a
<span class="c"># 这个-a相当于执行git add，但是只会add修改的文件，不会add新增的文件</span>

<span class="c">######</span>

<span class="c"># 删除已删除的文件</span>
<span class="c"># 一般就是 git rm [file]</span>
<span class="c"># 如果直接删除了本地文件可以用</span>
git add -u

<span class="c"># 删除已添加的文件</span>
<span class="c"># add了一个文件，想删掉从stage状态删掉</span>
<span class="c"># 或者从branch里删除某个文件</span>
<span class="c"># 不会删除本地文件</span>
git rm --cache <span class="o">[</span>file_name<span class="o">]</span>
</pre></div>


<p>感觉上面整理的相对混乱，自己找起来都困难，准备找机会整理下。</p>
<ul>
<li>git add</li>
</ul>
<div class="codehilite"><pre><span class="c"># 添加新文件，保存修改，删除已删除的文件</span>
<span class="c"># 相当于 git add . &amp;&amp; git add -u</span>
git add -A

<span class="c"># 保存修改，删除已删除的文件</span>
<span class="c"># 默认会加上 .</span>
<span class="c"># 也就是在当前目录执行</span>
git add -u
</pre></div>


<ul>
<li>git stash</li>
</ul>
<div class="codehilite"><pre><span class="c"># 需要进入其他分支又不想提交的时候，可以使用stash命令</span>
<span class="c"># 其实还可以先提交，之后再用git commit --amend命令修改</span>

<span class="c"># 新建</span>
git stash
<span class="c"># 想在新建时加个说明就</span>
git stash save <span class="o">[</span>&lt;message&gt;<span class="o">]</span>

<span class="c"># 查看stash</span>
<span class="c"># 其实就是diff，也是按照diff的样式输出的</span>
git stash show

<span class="c"># 列出所有stash</span>
git stash list

<span class="c"># 恢复</span>
<span class="c"># 并从list里删除</span>
git stash pop
<span class="c"># 不从list里删除</span>
git stash apply

<span class="c"># 删除</span>
<span class="c"># 一个</span>
git stash drop
<span class="c"># 全部</span>
git stash clear

<span class="c"># 在stash的基础上新建分支</span>
git stash branch &lt;branchname&gt;

<span class="c"># 默认大都是对最后保存的stash，也就是stash{0}执行命令</span>
<span class="c"># 在命令后面加上stash@{\d}就是针对指定stash执行了</span>
</pre></div>
</article>
</body>
</html>
