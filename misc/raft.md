# raft

---

https://raft.github.io/

---

不懂分布式，不过动态图看着很有意思。

---

- 有一份节点的汇总信息。每个节点都保存了这个信息。
- 有一个中心节点。所有边缘节点都只和中心节点通信。
    - 消息来、回，确定节点存活情况。
    - 如果边缘节点挂了，其他一切正常工作。
- 每个节点都有一个定时器。每个节点都有一个版本号。
- 中心节点的定时器是静止的。
- 边缘节点的定时器，在收到消息时，会重置。
- 定时器超时的时候，版本号增加，同时向其他节点发出信息。
    - 成功将其他节点的版本号都更新后，就会升级为新的中心节点。
- 多个节点同时超时的情况下，更新过程会比较复杂。
    - 节点的计时器不同，所以版本更新的时间也不一样。
    - 边缘节点被更新后，返回的消息会携带成功的信息。收到**全部**成功信息，就会升级成中心。
    - 没人收到全部成功信息，就会等下一轮超时同步。
