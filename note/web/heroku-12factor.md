# heroku twelve factor

---

+ http://12factor.net/

---

后面的十二条都不是重点，关键是想要达成什么效果。
文中提到五点：

+ 环境要易于搭建。
    - 这点对于部署和新人加入开发都是有益的。
+ 明确对底层有哪些依赖。
    - 哪些部分是不受代码控制、需要提前准备好的。
    - 个人感觉前面说的侧重于内部，这点侧重于外部。
    - 明确这点有助于在不同环境中移植。
+ 发布不依赖于运维人员。
    - 减少对外依赖，让生产环境更加可控。
+ 减小开发环境与生产环境的差异。
    - 及早发现问题，也便于复现问题。
+ 可以水平拓展。
    - 可以当然最好啦

后面是具体的方法，我觉得主要是针对 heroku 来说的。
针对实际情况，还要再多思考。

---

+ 代码库
    - 版本管理
    - 应用只有一套基准代码
+ 依赖
    - 在应用中申明全部依赖
    - 系统隔离
    - 即使能在系统层面满足依赖，也尽可能选择在应用内自给自足
+ 配置
    - 使用系统环境变量而不是配置文件
    - 不同语言、应用能够通用，保证一个环境中，各项配置一致
    - 快速切换配置，无需修改代码
    - 个人没用过 heroku 的发布系统，感觉全部用配置并不容易
+ 外部服务
    - 通过配置确定使用哪些外部服务
    - 保证灵活性，不在代码中与某个应用产生耦合，便于在不同依赖间切换
+ 构建部署
    - 严格区分构建、发布、执行
    - 每次发布都有自己的记录，便于回滚
    - 构建过程安装依赖并进行资源预处理，发布过程读取配置
+ 应用进程
    - 一次部署可能有多个进程，甚至是多个环境同时部署
    - 进程是无状态的，进程间也不共享任何信息
    - 需要进程间同步的数据，交由专门维护状态的外部服务
+ 对外服务
    - 通过协议对外提过服务
    - 应用本身也可作为其他应用的外部服务
+ 并发
    - 拓展时使用进程模型
    - 进程内部再使用其他多路复用的技术
+ 稳定性
    - 进程能够快速启动、安全关闭
+ 开发及生产环境
    - 开发时，使用与生产环境相同的后端服务
+ 日志
    - 日志都输出到标准输出
+ 管理进程
    - 使用一个管理进程来执行一些一次性任务
    - 管理进程的环境、配置，都和普通进程保持统一
