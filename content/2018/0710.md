+++
date = '2018-07-10'
title = 'code review'
tags = ['code review']
+++

在 code review 时被挑战，使用函数式编程有什么好处？

拿来分析的代码里，部分逻辑写成了 pointfree 的风格。
不仅有 map/filter/reduce，还包括一些 if/else。
这让代码显得复杂，会被质疑也是理所当然的。

pointfree 或者高阶函数玩得太嗨，确实会影响代码的可读性。
在开发过程中，对过程进行抽象，专注于数据变换，感觉写得很流畅。
但是在看代码的时候，不知道输入输出的类型，理解的难度会增加。

既然知道缺点，为什么还写出这样代码？
可能是由于惯性或者思维模式影响。
习惯了以数据为中心，编码时自然会把过程抽象成函数，做组合。
接触不同范式的意义大概也就在这里，帮助打破思维惯性。

这里可以再举一个例子。
我之前见过的 vue 模块，在做逻辑拆分的时候，都是把函数拆开放到 methods 里面。
即使本身是纯函数，也很少会拆分到 vue component 外面。
这或许也是思维惯性导致的。

回到最初的问题，使用函数式编程有什么好处？
在之前的具体场景里，需求是要根据数据的不同类型做不同处理，后续数据类型会增加。
数据与操作的二维组合，会让人想到 expression problem。既然明确知道只有数据类型会扩展，那么 OOP 的方式可能更适合。
具体在这个场景里，确实体现不出高阶函数抽象数据流的优势。
